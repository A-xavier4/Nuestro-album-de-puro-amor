<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>√Ålbum Rojo Elegante</title>

<style>
    body {
        margin: 0;
        background: linear-gradient(135deg, #02ffee, #04fdf5, #03ffcd);
        font-family: "Segoe UI", sans-serif;
        color: #fff;
        overflow-x: hidden;
    }

    .title {
        text-align: center;
        padding: 20px 10px;
        font-size: 28px;
        font-weight: bold;
        text-shadow: 0 0 12px #f04343;
    }

    /* ---- GALER√çA ---- */
    .gallery-container {
        position: relative;
        width: 100%;
        overflow: hidden;
        padding-bottom: 40px;
        display: flex;
        justify-content: center;
    }

    .slider {
        display: flex;
        gap: 20px;
        transition: transform .6s ease;
        padding: 10px 20px;
    }

    .slide {
        flex: 0 0 80%;
        max-width: 650px;
        border-radius: 20px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(6px);
        border: 1px solid rgba(222, 49, 241, 0.4);
        box-shadow: 0 0 20px rgba(222, 49, 241, 0.4);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .media-wrap {
        width: 100%;
        height: auto;
        max-height: 420px;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        background: #000;
        position: relative;
    }

    img, video {
        width: 100%;
        height: auto;
        max-height: 420px;
        object-fit: contain;
        cursor: pointer;
    }

    /* ---- BOTONES ---- */
    .btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        padding: 14px 18px;
        background: rgba(255, 0, 0, 0.3);
        backdrop-filter: blur(5px);
        border-radius: 50%;
        cursor: pointer;
        font-size: 22px;
        color: white;
        user-select: none;
        box-shadow: 0 0 10px rgba(255, 0, 0, .8);
        transition: .25s ease;
    }

    .btn:hover {
        background: rgba(0, 255, 234, 0.5);
        transform: translateY(-50%) scale(1.1);
    }

    #btn-left { left: 10px; }
    #btn-right { right: 10px; }

    /* ---- LIGHTBOX ---- */
    .lightbox {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, .85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999;
        opacity: 0;
        pointer-events: none;
        transition: .3s ease;
    }

    .lightbox.active {
        opacity: 1;
        pointer-events: all;
    }

    .lightbox-content {
        max-width: 85%;
        max-height: 85%;
        border-radius: 14px;
        box-shadow: 0 0 20px rgb(0, 255, 166);
    }

    .lightbox img,
    .lightbox video {
        width: 100%;
        height: auto;
        max-height: 85vh;
        object-fit: contain;
        border-radius: 14px;
    }
</style>
</head>
<body>

<div class="title">Nuestro √Ålbum üíó</div>

<div class="gallery-container">
    <div id="slider" class="slider"></div>

    <div id="btn-left" class="btn">‚ùÆ</div>
    <div id="btn-right" class="btn">‚ùØ</div>
</div>

<!-- LIGHTBOX -->
<div id="lightbox" class="lightbox">
    <div id="lightboxContent" class="lightbox-content"></div>
</div>

<script>
/* -----------------------------
   CARGA AUT√ìMATICA DE ARCHIVOS
----------------------------- */
const slider = document.getElementById("slider");
let slides = [];

/* Fotos */
let fotos = [];
fotos.push("foto_38.jpg");
for(let i = 37; i >= 1; i--){
    fotos.push(`foto ${i}.jpg`);
}

/* Videos */
let videos = [];
videos.push("video 41.mp4");
for(let i = 40; i >= 1; i--){
    videos.push(`video ${i}.mp4`);
}

/* Alternarlas */
let max = Math.max(fotos.length, videos.length);
let indexFoto = 0, indexVideo = 0;

for(let i=0;i<max;i++){
    if(indexFoto < fotos.length){
        slides.push({type:"foto",file:fotos[indexFoto]});
        indexFoto++;
    }
    if(indexVideo < videos.length){
        slides.push({type:"video",file:videos[indexVideo]});
        indexVideo++;
    }
}

/* -----------------------------
   PAUSAR TODOS LOS VIDEOS
----------------------------- */
function pauseAll(except){
    document.querySelectorAll("video").forEach(v=>{
        if(v !== except) v.pause();
    });
}

/* -----------------------------
   LIGHTBOX (NO AGRANDA MUCHO)
----------------------------- */
function openLightbox(element){
    let box = document.getElementById("lightbox");
    let content = document.getElementById("lightboxContent");
    
    content.innerHTML = "";
    
    let clone = element.cloneNode(true);
    clone.style.maxHeight = "85vh"; // üíó No se agranda demasiado
    clone.controls = element.tagName === "VIDEO";

    box.classList.add("active");
    content.appendChild(clone);
}

document.getElementById("lightbox").addEventListener("click", ()=>{
    document.getElementById("lightbox").classList.remove("active");
    pauseAll(null);
});

/* -----------------------------
   CREAR SLIDES
----------------------------- */
slides.forEach(obj=>{
    let slide = document.createElement("div");
    slide.className = "slide";

    let wrap = document.createElement("div");
    wrap.className = "media-wrap";

    if(obj.type === "foto"){
        let img = document.createElement("img");
        img.src = "media/" + obj.file;
        img.onclick = () => openLightbox(img);

        wrap.appendChild(img);
    } else {
        let v = document.createElement("video");
        v.src = "media/" + obj.file;
        v.controls = true;
        v.preload = "metadata";
        v.playsInline = true;

        let shield = document.createElement("div");
        shield.style.position="absolute";
        shield.style.inset="0";

        shield.onclick = ()=>{
            shield.remove();
            v.play();
            pauseAll(v);
        };

        v.onclick = ()=> openLightbox(v);

        wrap.appendChild(v);
        wrap.appendChild(shield);
    }

    slide.appendChild(wrap);
    slider.appendChild(slide);
});

/* -----------------------------
   BOTONES + PAUSA AL CAMBIAR
----------------------------- */
let currentIndex = 0;

function updateSlider(){
    let cardW = slider.children[0].offsetWidth + 20;
    slider.style.transform = `translateX(-${currentIndex * cardW}px)`;
    pauseAll(null); // üíó Pausa el video anterior
}

document.getElementById("btn-left").onclick = () => {
    if(currentIndex > 0){
        currentIndex--;
        updateSlider();
    }
};

document.getElementById("btn-right").onclick = () => {
    if(currentIndex < slider.children.length - 1){
        currentIndex++;
        updateSlider();
    }
};
</script>

</body>
</html>
